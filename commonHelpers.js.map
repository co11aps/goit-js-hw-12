{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/refs.js","../src/img/stop-icon.svg","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default async function searchPicture(userValue, page) {\n  const API_KEY = '42365845-25d760151cd88cf2d1cecf2ad';\n  axios.defaults.baseURL = 'https://pixabay.com';\n  const response = await axios.get('/api/', {\n    params: {\n      key: API_KEY,\n      q: userValue,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: 15,\n      page: page,\n    },\n  });\n  console.log(response.data);\n  return response.data;\n}\n","export const refs = {\n  searchForm: document.querySelector('.js-search-form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n};\n","export default \"__VITE_ASSET__50fe3f02__\"","import { refs } from './refs';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport stopIcon from '../img/stop-icon.svg';\nimport { page } from '../main';\nimport { searchRequest } from '../main';\nimport { loadMoreBtnShow } from '../main';\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  overlayOpacity: 0.8,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function galleryTemplate(resultsArr) {\n  return resultsArr.hits\n    .map(\n      ({ largeImageURL, webformatURL, tags }) => `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n  </a>\n</li>`\n    )\n    .join('');\n}\n\nexport function renderGallery(resultsArr) {\n  if (resultsArr.hits.length > 0) {\n    const markup = galleryTemplate(resultsArr);\n    refs.gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n    loadMoreBtnShow(resultsArr);\n  } else {\n    iziToast.show({\n      message:\n        'Sorry, there are no images matching<br>your search query. Please try again!',\n      color: 'red',\n      messageColor: '#fff',\n      backgroundColor: '#EF4040',\n      messageSize: '16',\n      position: 'topRight',\n      iconUrl: stopIcon,\n      messageLineHeight: '24',\n      closeOnClick: 'true',\n      close: 'false',\n      transitionIn: 'fadeInLeft',\n    });\n  }\n}\n\n// export function loadMoreBtnShow(resultsArr) {\n//   const totalHits = resultsArr.totalHits;\n//   const maxPage = Math.ceil(totalHits / 15);\n//   if (page < maxPage) {\n//     refs.loadMoreBtn.classList.remove('isHidden');\n//   } else {\n//     refs.loadMoreBtn.classList.add('isHidden');\n//     iziToast.show({\n//       message: \"We're sorry, but you've reached<br>the end of search results.\",\n//       color: 'blue',\n//       messageColor: '#001',\n//       backgroundColor: '#FFF',\n//       messageSize: '16',\n//       position: 'topRight',\n//       iconUrl: stopIcon,\n//       messageLineHeight: '24',\n//       closeOnClick: 'true',\n//       close: 'false',\n//       transitionIn: 'fadeInLeft',\n//     });\n//   }\n// }\n","import searchPicture from './js/pixabay-api.js';\nimport { galleryTemplate, renderGallery } from './js/render-functions.js';\nimport { refs } from './js/refs.js';\n// import { loadMoreBtnShow } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport stopIcon from './img/stop-icon.svg';\n\nexport let searchRequest = '';\nexport let page = 1;\n\nrefs.searchForm.addEventListener('submit', e => {\n  e.preventDefault();\n\n  const searchTopic = e.target.elements.query.value.trim();\n\n  if (searchTopic !== '') {\n    searchRequest = searchTopic;\n    console.log(searchRequest);\n    refs.loader.classList.remove('isHidden');\n    refs.gallery.innerHTML = '';\n    refs.loadMoreBtn.classList.add('isHidden');\n    page = 1;\n    searchPicture(searchTopic, page)\n      .then(data => {\n        galleryTemplate(data);\n        renderGallery(data);\n        refs.loader.classList.add('isHidden');\n        // loadMoreBtnShow(data);\n      })\n      .catch(error => {\n        console.error(error);\n      });\n  }\n\n  e.target.reset();\n});\n\nrefs.loadMoreBtn.addEventListener('click', () => {\n  page += 1;\n  searchPicture(searchRequest, page)\n    .then(data => {\n      galleryTemplate(data);\n      renderGallery(data);\n      refs.loader.classList.add('isHidden');\n      // loadMoreBtnShow(data);\n    })\n    .catch(error => {\n      console.error(error);\n    });\n  // console.log(page);\n});\n\nexport function loadMoreBtnShow(resultsArr) {\n  const totalHits = resultsArr.totalHits;\n  const maxPage = Math.ceil(totalHits / 15);\n  if (page < maxPage) {\n    refs.loadMoreBtn.classList.remove('isHidden');\n  } else {\n    refs.loadMoreBtn.classList.add('isHidden');\n    iziToast.show({\n      message: \"We're sorry, but you've reached<br>the end of search results.\",\n      color: 'blue',\n      messageColor: '#001',\n      backgroundColor: '#FFF',\n      messageSize: '16',\n      position: 'topRight',\n      iconUrl: stopIcon,\n      messageLineHeight: '24',\n      closeOnClick: 'true',\n      close: 'false',\n      transitionIn: 'fadeInLeft',\n    });\n  }\n}\n"],"names":["searchPicture","userValue","page","API_KEY","axios","response","refs","stopIcon","lightbox","SimpleLightbox","galleryTemplate","resultsArr","largeImageURL","webformatURL","tags","renderGallery","markup","loadMoreBtnShow","iziToast","searchRequest","searchTopic","data","error","totalHits","maxPage"],"mappings":"owBAEe,eAAeA,EAAcC,EAAWC,EAAM,CAC3D,MAAMC,EAAU,qCAChBC,EAAM,SAAS,QAAU,sBACzB,MAAMC,EAAW,MAAMD,EAAM,IAAI,QAAS,CACxC,OAAQ,CACN,IAAKD,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAMC,CACP,CACL,CAAG,EACD,eAAQ,IAAIG,EAAS,IAAI,EAClBA,EAAS,IAClB,CClBO,MAAMC,EAAO,CAClB,WAAY,SAAS,cAAc,iBAAiB,EACpD,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,EACxC,YAAa,SAAS,cAAc,gBAAgB,CACtD,ECLeC,EAAA,+CCUf,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAC9C,eAAgB,GAChB,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAgBC,EAAY,CAC1C,OAAOA,EAAW,KACf,IACC,CAAC,CAAE,cAAAC,EAAe,aAAAC,EAAc,KAAAC,CAAM,IAAK;AAAA,kCACfF,CAAa;AAAA,sCACTC,CAAY,UAAUC,CAAI;AAAA;AAAA,MAG3D,EACA,KAAK,EAAE,CACZ,CAEO,SAASC,EAAcJ,EAAY,CACxC,GAAIA,EAAW,KAAK,OAAS,EAAG,CAC9B,MAAMK,EAASN,EAAgBC,CAAU,EACzCL,EAAK,QAAQ,mBAAmB,YAAaU,CAAM,EACnDR,EAAS,QAAO,EAChBS,EAAgBN,CAAU,CAC9B,MACIO,EAAS,KAAK,CACZ,QACE,8EACF,MAAO,MACP,aAAc,OACd,gBAAiB,UACjB,YAAa,KACb,SAAU,WACV,QAASX,EACT,kBAAmB,KACnB,aAAc,OACd,MAAO,QACP,aAAc,YACpB,CAAK,CAEL,CC1CO,IAAIY,EAAgB,GAChBjB,EAAO,EAElBI,EAAK,WAAW,iBAAiB,SAAU,GAAK,CAC9C,EAAE,eAAc,EAEhB,MAAMc,EAAc,EAAE,OAAO,SAAS,MAAM,MAAM,OAE9CA,IAAgB,KAClBD,EAAgBC,EAChB,QAAQ,IAAID,CAAa,EACzBb,EAAK,OAAO,UAAU,OAAO,UAAU,EACvCA,EAAK,QAAQ,UAAY,GACzBA,EAAK,YAAY,UAAU,IAAI,UAAU,EACzCJ,EAAO,EACPF,EAAcoB,EAAalB,CAAI,EAC5B,KAAKmB,GAAQ,CACZX,EAAgBW,CAAI,EACpBN,EAAcM,CAAI,EAClBf,EAAK,OAAO,UAAU,IAAI,UAAU,CAE5C,CAAO,EACA,MAAMgB,GAAS,CACd,QAAQ,MAAMA,CAAK,CAC3B,CAAO,GAGL,EAAE,OAAO,OACX,CAAC,EAEDhB,EAAK,YAAY,iBAAiB,QAAS,IAAM,CAC/CJ,GAAQ,EACRF,EAAcmB,EAAejB,CAAI,EAC9B,KAAKmB,GAAQ,CACZX,EAAgBW,CAAI,EACpBN,EAAcM,CAAI,EAClBf,EAAK,OAAO,UAAU,IAAI,UAAU,CAE1C,CAAK,EACA,MAAMgB,GAAS,CACd,QAAQ,MAAMA,CAAK,CACzB,CAAK,CAEL,CAAC,EAEM,SAASL,EAAgBN,EAAY,CAC1C,MAAMY,EAAYZ,EAAW,UACvBa,EAAU,KAAK,KAAKD,EAAY,EAAE,EACpCrB,EAAOsB,EACTlB,EAAK,YAAY,UAAU,OAAO,UAAU,GAE5CA,EAAK,YAAY,UAAU,IAAI,UAAU,EACzCY,EAAS,KAAK,CACZ,QAAS,gEACT,MAAO,OACP,aAAc,OACd,gBAAiB,OACjB,YAAa,KACb,SAAU,WACV,QAASX,EACT,kBAAmB,KACnB,aAAc,OACd,MAAO,QACP,aAAc,YACpB,CAAK,EAEL"}
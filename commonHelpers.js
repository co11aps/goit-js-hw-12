import{a as u,S as p,i as f}from"./assets/vendor-da186403.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();async function g(e,t){const r="42365845-25d760151cd88cf2d1cecf2ad";u.defaults.baseURL="https://pixabay.com";const i=await u.get("/api/",{params:{key:r,q:e,image_type:"photo",orientation:"horizontal",safesearch:"true",per_page:15,page:t}});return console.log(i.data),i.data}const s={searchForm:document.querySelector(".js-search-form"),gallery:document.querySelector(".gallery"),loader:document.querySelector(".loader"),loadMoreBtn:document.querySelector(".load-more-btn")},m="/goit-js-hw-12/assets/stop-icon-31877272.svg";let y=new p(".gallery a",{overlayOpacity:.8,captionsData:"alt",captionDelay:250});function d(e){return e.hits.map(({largeImageURL:t,webformatURL:r,tags:i})=>`<li class="gallery-item">
  <a class="gallery-link" href="${t}">
    <img class="gallery-image" src="${r}" alt="${i}" loading="lazy"/>
  </a>
</li>`).join("")}function h(e){if(e.hits.length>0){const t=d(e);s.gallery.insertAdjacentHTML("beforeend",t),y.refresh(),L(e)}else f.show({message:"Sorry, there are no images matching<br>your search query. Please try again!",color:"red",messageColor:"#fff",backgroundColor:"#EF4040",messageSize:"16",position:"topRight",iconUrl:m,messageLineHeight:"24",closeOnClick:"true",close:"false",transitionIn:"fadeInLeft"})}let c="",l=1;s.searchForm.addEventListener("submit",e=>{e.preventDefault();const t=e.target.elements.query.value.trim();t!==""&&(c=t,console.log(c),s.loader.classList.remove("isHidden"),s.gallery.innerHTML="",s.loadMoreBtn.classList.add("isHidden"),l=1,g(t,l).then(r=>{d(r),h(r),s.loader.classList.add("isHidden")}).catch(r=>{console.error(r)})),e.target.reset()});s.loadMoreBtn.addEventListener("click",()=>{l+=1,s.loadMoreBtn.classList.add("isHidden"),s.loader.classList.remove("isHidden"),g(c,l).then(e=>{d(e),h(e),s.loader.classList.add("isHidden"),b()}).catch(e=>{console.error(e)})});function L(e){const t=e.totalHits,r=Math.ceil(t/15);l<r?s.loadMoreBtn.classList.remove("isHidden"):(s.loadMoreBtn.classList.add("isHidden"),f.show({message:"We're sorry, but you've reached<br>the end of search results.",color:"blue",messageColor:"#001",backgroundColor:"#6c8cff",messageSize:"16",position:"topRight",iconUrl:m,messageLineHeight:"24",closeOnClick:"true",close:"false",transitionIn:"fadeInLeft"}))}function b(){if(l>1){const e=document.querySelector(".gallery-item").getBoundingClientRect();window.scrollBy({top:e.height*2,left:0,behavior:"smooth"})}}
//# sourceMappingURL=commonHelpers.js.map
